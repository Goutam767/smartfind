<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFound - Stacks Blockchain Lost & Found</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css"></noscript>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"></noscript>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"></noscript>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #5546ff 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(45deg, #667eea, #764ba2);
            --success-gradient: linear-gradient(45deg, #28a745, #20c997);
            --danger-gradient: linear-gradient(45deg, #dc3545, #fd7e14);
            --warning-gradient: linear-gradient(45deg, #ffc107, #fd7e14);
            --shadow-soft: 0 10px 40px rgba(0,0,0,0.1);
            --shadow-hover: 0 20px 60px rgba(0,0,0,0.15);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            transition: var(--transition);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .loading-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Enhanced Navbar */
        .navbar {
            backdrop-filter: blur(20px);
            background: rgba(33, 37, 41, 0.95) !important;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            transition: var(--transition);
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-link {
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--primary-gradient);
            transition: var(--transition);
            transform: translateX(-50%);
        }

        .nav-link:hover::before {
            width: 80%;
        }

        /* Enhanced Hero Section */
        .hero-section {
            background: var(--primary-gradient);
            color: white;
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-weight: 700;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards 0.3s;
        }

        .hero-subtitle {
            font-weight: 400;
            opacity: 0.9;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards 0.6s;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Enhanced Cards */
        .card {
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-soft);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            transition: var(--transition);
            overflow: hidden;
        }

        .card-hover {
            cursor: pointer;
            position: relative;
        }

        .card-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: var(--transition);
            z-index: 1;
        }

        .card-hover:hover::before {
            opacity: 0.05;
        }

        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }

        .card-hover .card-body {
            position: relative;
            z-index: 2;
        }

        /* Enhanced Buttons */
        .btn {
            border-radius: var(--border-radius);
            font-weight: 600;
            padding: 0.75rem 2rem;
            border: none;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: var(--transition);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-stacks {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-stacks:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(85, 70, 255, 0.3);
        }

        .btn-success {
            background: var(--success-gradient);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);
        }

        .btn-danger {
            background: var(--danger-gradient);
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);
        }

        /* Enhanced Forms */
        .form-control {
            border-radius: var(--border-radius);
            border: 2px solid #e9ecef;
            padding: 0.75rem 1rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .form-control:focus {
            border-color: #5546ff;
            box-shadow: 0 0 0 0.2rem rgba(85, 70, 255, 0.25);
            background: white;
            transform: translateY(-1px);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 0.5rem;
        }

        /* Enhanced Activity Feed */
        .activity-item {
            border-left: 3px solid transparent;
            border-image: var(--primary-gradient) 1;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            margin-bottom: 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
            opacity: 0;
            transform: translateX(-20px);
            animation: slideInLeft 0.5s ease forwards;
        }

        .activity-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-soft);
        }

        @keyframes slideInLeft {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Enhanced Modals */
        .modal-content {
            border-radius: var(--border-radius);
            border: none;
            box-shadow: var(--shadow-hover);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
        }

        .modal-header {
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            border-bottom: none;
            padding: 1.5rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        /* Enhanced Badges */
        .stx-badge {
            background: var(--primary-gradient);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .badge-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Enhanced Progress Bars */
        .progress {
            height: 8px;
            border-radius: 50px;
            background: rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .progress-bar {
            border-radius: 50px;
            transition: width 1s ease;
        }

        .match-confidence {
            background: var(--success-gradient);
            animation: progressFill 2s ease;
        }

        @keyframes progressFill {
            from { width: 0%; }
        }

        /* Enhanced Notifications */
        .toast-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 9999;
            max-width: 400px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-hover);
            backdrop-filter: blur(20px);
            border: none;
            transform: translateX(100%);
            animation: slideInRight 0.5s ease forwards;
        }

        @keyframes slideInRight {
            to { transform: translateX(0); }
        }

        /* Page Transitions */
        .page-content {
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition);
        }

        .page-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Floating Action Elements */
        .floating-stats {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-gradient);
            color: white;
            padding: 1rem;
            border-radius: 50px;
            box-shadow: var(--shadow-hover);
            z-index: 1000;
            cursor: pointer;
            transition: var(--transition);
        }

        .floating-stats:hover {
            transform: scale(1.1);
        }

        /* Enhanced Input Groups */
        .input-group-text {
            background: var(--primary-gradient);
            color: white;
            border: none;
            font-weight: 600;
        }

        /* Responsive Enhancements */
        @media (max-width: 768px) {
            .hero-section {
                padding: 4rem 0;
            }
            
            .card-hover:hover {
                transform: translateY(-5px) scale(1.01);
            }
            
            .btn {
                padding: 0.6rem 1.5rem;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-gradient);
        }

        /* Particle Background */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Enhanced How It Works Section */
        .how-it-works-item {
            text-align: center;
            padding: 2rem;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-soft);
            transition: var(--transition);
            opacity: 0;
            transform: translateY(30px);
        }

        .how-it-works-item.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .how-it-works-item:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .step-icon {
            width: 80px;
            height: 80px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .step-icon::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: var(--transition);
        }

        .step-icon:hover::before {
            width: 100px;
            height: 100px;
        }

        .back-btn {
            position: fixed;
            top: 80px;
            left: 20px;
            z-index: 1000;
            border-radius: 50px;
        }

        .item-id {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="text-center">
            <div class="loading-spinner mb-3"></div>
            <h5 class="text-white">Loading SmartFound...</h5>
            <p class="text-white-50">Connecting to Stacks Blockchain</p>
        </div>
    </div>

    <!-- Floating Stats -->
    <div class="floating-stats d-none d-md-block" onclick="showPage('activity')" title="View Activity">
        <i class="fas fa-chart-line"></i>
        <span class="ml-2" id="floatingStats">0 Items</span>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showPage('home')">
                <i class="fas fa-brain"></i> SmartFound
            </a>
            
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('home')">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('lost')">
                            <i class="fas fa-search-minus"></i> Lost Item
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('found')">
                            <i class="fas fa-search-plus"></i> Found Item
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('activity')">
                            <i class="fas fa-history"></i> Activity
                        </a>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-outline-light btn-sm ml-2" id="connectWallet">
                            <i class="fas fa-wallet"></i> Connect Leather
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="homePage" class="page-content active">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="particles" id="particles"></div>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-md-10 col-sm-12">
                        <div class="hero-content text-center">
                            <h1 class="display-4 hero-title">Welcome to SmartFound</h1>
                            <p class="lead hero-subtitle">A decentralized lost and found system powered by Stacks blockchain technology for transparent, secure, and trustless item recovery.</p>
                            <p class="hero-subtitle">Register your lost items on the Stacks blockchain and get notified when someone finds them, or help others by reporting found items and earn STX rewards.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-xl-5 col-lg-6 col-md-6 col-sm-12 mb-4">
                        <div class="card card-hover h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-search-minus fa-3x text-danger mb-3"></i>
                                <h5 class="card-title">Lost Something?</h5>
                                <p class="card-text">Register your lost item on the Stacks blockchain with optional STX reward</p>
                                <button class="btn btn-danger" onclick="showPage('lost')">Report Lost Item</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-5 col-lg-6 col-md-6 col-sm-12 mb-4">
                        <div class="card card-hover h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-search-plus fa-3x text-success mb-3"></i>
                                <h5 class="card-title">Found Something?</h5>
                                <p class="card-text">Help someone by reporting a found item and earn STX rewards</p>
                                <button class="btn btn-success" onclick="showPage('found')">Report Found Item</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section class="py-5 bg-light">
            <div class="container">
                <h2 class="text-center mb-5">How SmartFound Works on Stacks</h2>
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <div class="how-it-works-item">
                            <div class="step-icon">
                                <i class="fas fa-wallet fa-2x text-white"></i>
                            </div>
                            <h5>Connect Leather Wallet</h5>
                            <p class="text-muted">Connect your Leather wallet to interact with the Stacks blockchain securely</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                        <div class="how-it-works-item">
                            <div class="step-icon">
                                <i class="fas fa-plus fa-2x text-white"></i>
                            </div>
                            <h5>Register Items</h5>
                            <p class="text-muted">Register lost or found items on the Stacks blockchain with smart contracts</p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12 col-sm-12 mb-4">
                        <div class="how-it-works-item">
                            <div class="step-icon">
                                <i class="fas fa-coins fa-2x text-white"></i>
                            </div>
                            <h5>Earn STX Rewards</h5>
                            <p class="text-muted">Get rewarded in STX tokens when you help reunite people with their lost items</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Lost Item Page -->
    <div id="lostPage" class="page-content" style="display: none;">
        <button class="btn btn-secondary back-btn" onclick="showPage('home')">
            <i class="fas fa-arrow-left"></i> Back to Home
        </button>
        
        <div class="container" style="padding-top: 100px;">
            <div class="row justify-content-center">
                <div class="col-xl-6 col-lg-8 col-md-10 col-sm-12">
                    <div class="card">
                        <div class="card-header text-white" style="background: var(--danger-gradient);">
                            <h4 class="mb-0">
                                <i class="fas fa-search-minus"></i> Report Lost Item on Stacks
                            </h4>
                            <small>Register your lost item on the Stacks blockchain</small>
                        </div>
                        <div class="card-body">
                            <form id="lostItemForm">
                                <div class="form-group">
                                    <label>Item Name *</label>
                                    <input type="text" class="form-control" id="lostItemName" placeholder="e.g., iPhone 14 Pro, Black Wallet, Car Keys" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Detailed Description *</label>
                                    <textarea class="form-control" id="lostItemDesc" rows="3" placeholder="Detailed description, unique features, brand, color, any distinguishing marks..." required></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label>Location Lost *</label>
                                    <input type="text" class="form-control" id="lostLocation" placeholder="e.g., Central Park NYC, Starbucks on 5th Ave, University Campus" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Date Lost</label>
                                    <input type="date" class="form-control" id="lostDate">
                                </div>
                                
                                <div class="form-group">
                                    <label>STX Reward (Optional)</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="rewardAmount" step="0.1" placeholder="10" min="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">STX</span>
                                        </div>
                                    </div>
                                    <small class="form-text text-muted">Offering a reward increases the chances of recovery</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>Contact Information *</label>
                                    <input type="text" class="form-control" id="lostContact" placeholder="Email or phone (encrypted on Stacks blockchain)" required>
                                </div>
                                
                                <button type="submit" class="btn btn-stacks btn-block btn-lg">
                                    <i class="fas fa-link"></i> Register on Stacks Blockchain
                                </button>
                                
                                <div class="mt-3 text-center">
                                    <small class="text-muted">
                                        <i class="fas fa-shield-alt"></i> 
                                        Your data is encrypted and stored securely on the Stacks blockchain
                                    </small>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Found Item Page -->
    <div id="foundPage" class="page-content" style="display: none;">
        <button class="btn btn-secondary back-btn" onclick="showPage('home')">
            <i class="fas fa-arrow-left"></i> Back to Home
        </button>
        
        <div class="container" style="padding-top: 100px;">
            <div class="row justify-content-center">
                <div class="col-xl-6 col-lg-8 col-md-10 col-sm-12">
                    <div class="card">
                        <div class="card-header text-white" style="background: var(--success-gradient);">
                            <h4 class="mb-0">
                                <i class="fas fa-search-plus"></i> Report Found Item
                            </h4>
                            <small>Help someone recover their lost item and earn STX rewards</small>
                        </div>
                        <div class="card-body">
                            <form id="foundItemForm">
                                <div class="form-group">
                                    <label>Item Found *</label>
                                    <input type="text" class="form-control" id="foundItemName" placeholder="e.g., Black leather wallet, iPhone, Set of keys" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Description *</label>
                                    <textarea class="form-control" id="foundItemDesc" rows="3" placeholder="What does it look like? Brand, color, size, any distinctive features you can see..." required></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label>Location Found *</label>
                                    <input type="text" class="form-control" id="foundLocation" placeholder="e.g., Coffee shop on 5th Ave, Park bench near fountain" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Date Found</label>
                                    <input type="date" class="form-control" id="foundDate">
                                </div>
                                
                                <div class="form-group">
                                    <label>Your Contact Information *</label>
                                    <input type="text" class="form-control" id="finderContact" placeholder="Email or phone (encrypted on Stacks blockchain)" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Additional Notes</label>
                                    <textarea class="form-control" id="foundNotes" rows="2" placeholder="Any additional information that might help identify the owner..."></textarea>
                                </div>
                                
                                <button type="submit" class="btn btn-success btn-block btn-lg">
                                    <i class="fas fa-search"></i> Check Stacks for Matches
                                </button>
                                
                                <div class="mt-3 text-center">
                                    <small class="text-muted">
                                        <i class="fas fa-coins"></i> 
                                        Earn STX rewards when you help reunite items with their owners
                                    </small>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Activity Page -->
    <div id="activityPage" class="page-content" style="display: none;">
        <button class="btn btn-secondary back-btn" onclick="showPage('home')">
            <i class="fas fa-arrow-left"></i> Back to Home
        </button>
        
        <div class="container" style="padding-top: 100px;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2>Stacks Blockchain Activity</h2>
                        <div class="wallet-status">
                            <span class="badge badge-secondary badge-pulse" id="networkStatus">
                                <i class="fas fa-circle text-success"></i> Stacks Mainnet
                            </span>
                        </div>
                    </div>
                    
                    <div id="activityFeed">
                        <div class="text-center py-5">
                            <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
                            <p class="text-muted">No blockchain activity yet</p>
                            <small class="text-muted">Activity will appear here when items are reported on the Stacks blockchain</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header text-white" style="background: var(--success-gradient);">
                    <h5 class="modal-title">
                        <i class="fas fa-check-circle"></i> Stacks Transaction Successful!
                    </h5>
                    <button type="button" class="close text-white" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="successMessage"></p>
                    <div class="bg-light p-3 rounded mb-3">
                        <div class="row">
                            <div class="col-sm-4"><strong>Item ID:</strong></div>
                            <div class="col-sm-8">
                                <span class="item-id" id="itemId"></span>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-sm-4"><strong>Transaction ID:</strong></div>
                            <div class="col-sm-8">
                                <code class="small" id="transactionId"></code>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-sm-4"><strong>Block Height:</strong></div>
                            <div class="col-sm-8" id="blockHeight"></div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-sm-4"><strong>Network:</strong></div>
                            <div class="col-sm-8">Stacks Mainnet</div>
                        </div>
                    </div>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        Your item has been registered on the Stacks blockchain and is now searchable by the community.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal">
                        <i class="fas fa-check"></i> Got it!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Match Modal -->
    <div class="modal fade" id="matchModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header text-dark" style="background: var(--warning-gradient);">
                    <h5 class="modal-title">
                        <i class="fas fa-bullseye"></i> Match Found on Stacks!
                    </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <h6><i class="fas fa-trophy"></i> Congratulations!</h6>
                        <p class="mb-0">We found a registered lost item on the Stacks blockchain that matches your description. The owner has been automatically notified!</p>
                    </div>
                    
                    <div class="bg-light p-3 rounded mb-3">
                        <h6>Match Details:</h6>
                        <div class="row">
                            <div class="col-sm-4"><strong>Confidence:</strong></div>
                            <div class="col-sm-8">
                                <div class="progress">
                                    <div class="progress-bar match-confidence" style="width: 87%"></div>
                                </div>
                                <small class="text-muted">87% similarity match</small>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-sm-4"><strong>Reward:</strong></div>
                            <div class="col-sm-8">
                                <span class="stx-badge" id="matchReward">15 STX</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-coins"></i>
                        Your STX reward will be automatically transferred to your Leather wallet once the owner confirms the match.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" style="background: var(--warning-gradient); color: white;" data-dismiss="modal">
                        <i class="fas fa-star"></i> Awesome!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wallet Connection Modal -->
    <div class="modal fade" id="walletModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header text-white" style="background: var(--primary-gradient);">
                    <h5 class="modal-title">
                        <i class="fas fa-wallet"></i> Connect to Stacks
                    </h5>
                    <button type="button" class="close text-white" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <div id="leatherDetected" style="display: none;">
                        <i class="fas fa-wallet fa-3x text-success mb-3"></i>
                        <h6>Leather Wallet Detected</h6>
                        <p>Click below to connect your Leather wallet to SmartFound</p>
                        <button class="btn btn-stacks" onclick="connectLeatherWallet()">
                            <i class="fas fa-link"></i> Connect Leather Wallet
                        </button>
                    </div>
                    
                    <div id="leatherNotDetected">
                        <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                        <h6>Leather Wallet Not Found</h6>
                        <p>Please install the Leather wallet extension to use SmartFound</p>
                        <a href="https://leather.io" target="_blank" class="btn btn-primary mb-3">
                            <i class="fas fa-download"></i> Install Leather Wallet
                        </a>
                        <br>
                        <button class="btn btn-outline-secondary btn-sm" onclick="enableDemoMode()">
                            <i class="fas fa-play"></i> Continue in Demo Mode
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let walletConnected = false;
        let userAddress = '';
        let demoMode = false;
        let totalItems = 0;
        let registeredItems = [];

        // Initialize App
        $(document).ready(function() {
            console.log('SmartFound initialized - Enhanced UX ready');
            
            // Hide loading overlay faster
            setTimeout(() => {
                $('#loadingOverlay').addClass('fade-out');
                setTimeout(() => {
                    $('#loadingOverlay').remove();
                }, 100);
            }, 50);
            
            // Initialize particles with fewer count for performance
            createParticles();
            
            // Initialize animations
            initializeAnimations();
            
            // Check for Leather wallet
            checkLeatherWallet();
            
            // Initialize intersection observer for animations
            initializeScrollAnimations();
            
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            $('#lostDate, #foundDate').val(today);
        });

        function createParticles() {
            const particlesContainer = $('#particles');
            // Reduced particles for better performance
            for (let i = 0; i < 12; i++) {
                const particle = $('<div class="particle"></div>');
                particle.css({
                    left: Math.random() * 100 + '%',
                    top: Math.random() * 100 + '%',
                    width: Math.random() * 4 + 2 + 'px',
                    height: Math.random() * 4 + 2 + 'px',
                    animationDelay: Math.random() * 3 + 's',
                    animationDuration: (Math.random() * 3 + 4) + 's'
                });
                particlesContainer.append(particle);
            }
        }

        function initializeAnimations() {
            // Auto-update floating stats
            setInterval(updateFloatingStats, 5000);
        }

        function initializeScrollAnimations() {
            // Simplified scroll animations for better performance
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate');
                    }
                });
            }, { threshold: 0.1 });

            $('.how-it-works-item').each(function() {
                observer.observe(this);
            });
        }

        function updateFloatingStats() {
            const stats = [
                totalItems + ' Items',
                'Live Updates',
                'Stacks Ready'
            ];
            $('#floatingStats').text(stats[Math.floor(Math.random() * stats.length)]);
        }

        function checkLeatherWallet() {
            if (typeof window.LeatherProvider !== 'undefined' || typeof window.StacksProvider !== 'undefined') {
                $('#leatherDetected').show();
                $('#leatherNotDetected').hide();
            } else {
                $('#leatherDetected').hide();
                $('#leatherNotDetected').show();
            }
        }

        // Enhanced Page Navigation
        function showPage(page) {
            // Hide all pages with fade out
            $('.page-content.active').removeClass('active');
            
            setTimeout(() => {
                $('.page-content').hide();
                $('#' + page + 'Page').show().addClass('active');
                
                // Scroll to top smoothly
                $('html, body').animate({ scrollTop: 0 }, 500);
                
                // Collapse navbar on mobile
                $('.navbar-collapse').collapse('hide');
                
                // Update active nav item
                $('.nav-link').removeClass('active');
                $(.nav-link[onclick="showPage('${page}')"]).addClass('active');
            }, 300);
        }

        // Enhanced Wallet Connection
        $('#connectWallet').click(function() {
            if (!walletConnected) {
                $('#walletModal').modal('show');
            }
        });

        function connectLeatherWallet() {
            $('#walletModal').modal('hide');
            const button = $('#connectWallet');
            
            button.html('<i class="fas fa-spinner fa-spin"></i> Connecting...');
            button.prop('disabled', true);
            
            setTimeout(() => {
                walletConnected = true;
                userAddress = 'SP' + Math.random().toString(36).substr(2, 38).toUpperCase();
                button.html('<i class="fas fa-check"></i> ' + userAddress.substr(0, 6) + '...' + userAddress.substr(-4));
                button.removeClass('btn-outline-light').addClass('btn-success');
                button.prop('disabled', false);
                
                showEnhancedNotification('Leather wallet connected successfully to Stacks!', 'success');
                
                // Add connection animation
                button.addClass('badge-pulse');
                setTimeout(() => button.removeClass('badge-pulse'), 2000);
            }, 600);
        }

        function enableDemoMode() {
            $('#walletModal').modal('hide');
            const button = $('#connectWallet');
            
            demoMode = true;
            walletConnected = true;
            userAddress = 'SP' + Math.random().toString(36).substr(2, 38).toUpperCase();
            button.html('<i class="fas fa-flask"></i> Demo Mode');
            button.removeClass('btn-outline-light').addClass('btn-warning');
            
            showEnhancedNotification('Demo mode enabled - simulating Stacks blockchain', 'info');
        }

        // Generate unique item ID
        function generateItemId() {
            const timestamp = Date.now().toString(36);
            const random = Math.random().toString(36).substr(2, 5);
            return 'SF-' + timestamp + '-' + random.toUpperCase();
        }

        // Generate Stacks transaction ID
        function generateStacksTransactionId() {
            return '0x' + Array.from({length: 64}, () => Math.floor(Math.random() * 16).toString(16)).join('');
        }

        // Enhanced Form Submissions
        $('#lostItemForm').submit(function(e) {
            e.preventDefault();
            
            if (!walletConnected) {
                showEnhancedNotification('Please connect your Leather wallet first', 'danger');
                $('#walletModal').modal('show');
                return;
            }
            
            const itemName = $('#lostItemName').val().trim();
            const description = $('#lostItemDesc').val().trim();
            const location = $('#lostLocation').val().trim();
            const contact = $('#lostContact').val().trim();
            const reward = $('#rewardAmount').val();
            const dateLost = $('#lostDate').val();
            
            if (!itemName || !description || !location || !contact) {
                showEnhancedNotification('Please fill in all required fields', 'danger');
                return;
            }
            
            const submitBtn = $(this).find('button[type="submit"]');
            submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Processing Transaction...');
            submitBtn.prop('disabled', true);
            
            showEnhancedNotification('Processing Stacks blockchain transaction...', 'info');
            
            setTimeout(() => {
                const itemId = generateItemId();
                const transactionId = generateStacksTransactionId();
                const blockHeight = Math.floor(Math.random() * 100000) + 50000;
                
                // Store item data
                const itemData = {
                    id: itemId,
                    type: 'lost',
                    name: itemName,
                    description: description,
                    location: location,
                    contact: contact,
                    reward: reward,
                    dateLost: dateLost,
                    dateRegistered: new Date().toISOString(),
                    transactionId: transactionId,
                    blockHeight: blockHeight,
                    owner: userAddress
                };
                
                registeredItems.push(itemData);
                
                $('#successMessage').text(Your ${itemName} has been successfully registered on the Stacks blockchain. You'll be notified if someone finds it!);
                $('#itemId').text(itemId);
                $('#transactionId').text(transactionId);
                $('#blockHeight').text('#' + blockHeight);
                $('#successModal').modal('show');
                
                addEnhancedActivity('lost', itemName, location, reward, itemId);
                
                // Reset form with animation
                this.reset();
                $('#lostDate').val(new Date().toISOString().split('T')[0]);
                submitBtn.html('<i class="fas fa-link"></i> Register on Stacks Blockchain');
                submitBtn.prop('disabled', false);
                
                // Success animation
                submitBtn.addClass('btn-success').removeClass('btn-stacks');
                setTimeout(() => {
                    submitBtn.removeClass('btn-success').addClass('btn-stacks');
                }, 2000);
                
            }, 800);
        });

        $('#foundItemForm').submit(function(e) {
            e.preventDefault();
            
            if (!walletConnected) {
                showEnhancedNotification('Please connect your Leather wallet first', 'danger');
                $('#walletModal').modal('show');
                return;
            }
            
            const itemName = $('#foundItemName').val().trim();
            const description = $('#foundItemDesc').val().trim();
            const location = $('#foundLocation').val().trim();
            const contact = $('#finderContact').val().trim();
            const dateFound = $('#foundDate').val();
            const notes = $('#foundNotes').val().trim();
            
            if (!itemName || !description || !location || !contact) {
                showEnhancedNotification('Please fill in all required fields', 'danger');
                return;
            }
            
            const submitBtn = $(this).find('button[type="submit"]');
            submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Checking Matches...');
            submitBtn.prop('disabled', true);
            
            showEnhancedNotification('Checking Stacks blockchain for matches...', 'info');
            
            setTimeout(() => {
                const itemId = generateItemId();
                
                // Simple matching algorithm - check for similar items
                const matchFound = registeredItems.some(item => 
                    item.type === 'lost' && 
                    (item.name.toLowerCase().includes(itemName.toLowerCase()) || 
                     itemName.toLowerCase().includes(item.name.toLowerCase()) ||
                     item.description.toLowerCase().includes(description.toLowerCase()) ||
                     description.toLowerCase().includes(item.description.toLowerCase()))
                );
                
                if (matchFound && Math.random() > 0.3) {
                    const reward = Math.floor(Math.random() * 50) + 10;
                    $('#matchReward').text(reward + ' STX');
                    $('#matchModal').modal('show');
                    addEnhancedActivity('found', itemName, location, reward, itemId, true);
                    
                    // Celebration animation
                    showCelebration();
                } else {
                    const transactionId = generateStacksTransactionId();
                    const blockHeight = Math.floor(Math.random() * 100000) + 50000;
                    
                    // Store found item data
                    const itemData = {
                        id: itemId,
                        type: 'found',
                        name: itemName,
                        description: description,
                        location: location,
                        contact: contact,
                        dateFound: dateFound,
                        notes: notes,
                        dateRegistered: new Date().toISOString(),
                        transactionId: transactionId,
                        blockHeight: blockHeight,
                        finder: userAddress
                    };
                    
                    registeredItems.push(itemData);
                    
                    $('#successMessage').text(Your found ${itemName} has been registered on the Stacks blockchain. We'll notify you if the owner comes forward!);
                    $('#itemId').text(itemId);
                    $('#transactionId').text(transactionId);
                    $('#blockHeight').text('#' + blockHeight);
                    $('#successModal').modal('show');
                    addEnhancedActivity('found', itemName, location, null, itemId, false);
                }
                
                this.reset();
                $('#foundDate').val(new Date().toISOString().split('T')[0]);
                submitBtn.html('<i class="fas fa-search"></i> Check Stacks for Matches');
                submitBtn.prop('disabled', false);
                
            }, 700);
        });

        function showEnhancedNotification(message, type) {
            const alertClass = type === 'success' ? 'alert-success' : 
                              type === 'danger' ? 'alert-danger' : 'alert-info';
            
            const icon = type === 'success' ? 'fas fa-check-circle' :
                        type === 'danger' ? 'fas fa-exclamation-triangle' : 'fas fa-info-circle';
            
            const notification = $(`
                <div class="alert ${alertClass} alert-dismissible toast-notification">
                    <i class="${icon} mr-2"></i>
                    ${message}
                    <button type="button" class="close" data-dismiss="alert">
                        <span>&times;</span>
                    </button>
                </div>
            `);
            
            $('body').append(notification);
            
            setTimeout(() => {
                notification.alert('close');
            }, 4000);
        }

        function addEnhancedActivity(type, itemName, location, reward, itemId, matched = false) {
            const activityFeed = $('#activityFeed');
            
            // Remove empty state
            activityFeed.find('.text-center').remove();
            
            const icon = type === 'lost' ? 'fas fa-search-minus text-danger' : 'fas fa-search-plus text-success';
            const action = type === 'lost' ? 'reported lost' : 'reported found';
            const matchText = matched ? ' <span class="badge badge-success badge-pulse">Match found!</span>' : '';
            const rewardText = reward ? ` • Reward: ${reward} STX` : '';
            const transactionId = generateStacksTransactionId();
            const blockHeight = Math.floor(Math.random() * 100000) + 50000;
            
            const activity = $(`
                <div class="card mb-3 activity-item" style="animation-delay: 0s;">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <i class="${icon} fa-2x mr-3 mt-1"></i>
                            <div class="flex-grow-1">
                                <p class="mb-1">
                                    <strong>${itemName}</strong> ${action} near ${location}${rewardText}${matchText}
                                </p>
                                <small class="text-muted">
                                    Just now • ID: <span class="item-id">${itemId}</span> • Block #${blockHeight}
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            `);
            
            activityFeed.prepend(activity);
            
            // Keep only last 10 activities
            activityFeed.children().slice(10).remove();
            
            totalItems++;
        }

        function showCelebration() {
            // Simplified celebration for better performance
            const celebration = $('<div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem; color: gold; z-index: 10000; pointer-events: none;">🎉</div>');
            $('body').append(celebration);
            
            celebration.animate({
                opacity: 0,
                fontSize: '5rem'
            }, 1500, function() {
                $(this).remove();
            });
        }

        // Auto-update network status with enhanced animations
        setInterval(() => {
            const statuses = [
                '<i class="fas fa-circle text-success"></i> Stacks Mainnet',
                '<i class="fas fa-circle text-warning"></i> High Activity',
                '<i class="fas fa-circle text-info"></i> Normal Load'
            ];
            $('#networkStatus').fadeOut(300, function() {
                $(this).html(statuses[Math.floor(Math.random() * statuses.length)]).fadeIn(300);
            });
        }, 10000);

        // Enhanced form interactions
        $('.form-control').on('focus', function() {
            $(this).parent().addClass('focused');
        }).on('blur', function() {
            $(this).parent().removeClass('focused');
        });

        // Add smooth scrolling to all internal links
        $('a[href^="#"]').on('click', function(event) {
            var target = $(this.getAttribute('href'));
            if (target.length) {
                event.preventDefault();
                $('html, body').stop().animate({
                    scrollTop: target.offset().top - 100
                }, 1000);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97694e9d91a68013',t:'MTc1NjQ0MTc2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
